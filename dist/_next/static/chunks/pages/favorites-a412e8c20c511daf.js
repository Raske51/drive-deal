(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[389],{1903:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/favorites",function(){return r(6655)}])},1370:function(e,s,r){"use strict";r.d(s,{Z:function(){return m}});var t=r(5893),a=r(7294),i=r(5675),n=r.n(i),o=r(1664),l=r.n(o),c=r(6706),d=r(7066),u=r(6501);function m(e){var s,r;let{car:i,isFavorite:o=!1,onFavoriteToggle:m}=e,{user:x}=(0,c.a)(),[h,f]=(0,a.useState)(!1),v=async()=>{if(!x){u.ZP.error("Vous devez \xeatre connect\xe9 pour ajouter des favoris");return}try{f(!0),o?(await d.Z.delete("/api/favorites",{data:{carId:i._id}}),u.ZP.success("Retir\xe9 des favoris")):(await d.Z.post("/api/favorites",{carId:i._id}),u.ZP.success("Ajout\xe9 aux favoris")),null==m||m()}catch(e){u.ZP.error("Une erreur est survenue")}finally{f(!1)}};return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative h-48",children:[i.images.length>0?(0,t.jsx)(n(),{src:i.images[0],alt:i.title,fill:!0,className:"object-cover"}):(0,t.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,t.jsx)("button",{onClick:v,disabled:h,className:"absolute top-2 right-2 p-2 rounded-full bg-white shadow-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:(0,t.jsx)("svg",{className:"w-6 h-6 ".concat(o?"text-red-500":"text-gray-400"),fill:o?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)(l(),{href:"/cars/".concat(i._id),className:"block",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:i.title}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600 mb-2",children:(s=i.price,new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(s))}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Ann\xe9e :"})," ",i.year]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Kilom\xe9trage :"})," ",i.mileage.toLocaleString("fr-FR")," km"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Carburant :"})," ",i.fuel.charAt(0).toUpperCase()+i.fuel.slice(1)]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Bo\xeete :"})," ",i.transmission.charAt(0).toUpperCase()+i.transmission.slice(1)]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),i.location.city," (",i.location.department,")"]}),(0,t.jsx)("div",{children:(r=i.createdAt,new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric"}).format(new Date(r)))})]})]})})]})}},6655:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return d}});var t=r(5893),a=r(7294),i=r(3755),n=r(1370),o=r(6706),l=r(7066),c=r(6501);function d(){let{user:e}=(0,o.a)(),[s,r]=(0,a.useState)([]),[d,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{e&&m()},[e]);let m=async()=>{try{u(!0);let e=await l.Z.get("/api/favorites");r(e.data.favorites)}catch(e){c.ZP.error("Erreur lors du chargement des favoris")}finally{u(!1)}},x=async e=>{try{await l.Z.delete("/api/favorites",{data:{carId:e}}),r(s=>s.filter(s=>s._id!==e)),c.ZP.success("Voiture retir\xe9e des favoris")}catch(e){c.ZP.error("Erreur lors de la suppression du favori")}};return e?(0,t.jsx)(i.Z,{children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Mes favoris"}),d?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,t.jsx)(n.Z,{car:e,isFavorite:!0,onFavoriteToggle:()=>x(e._id)},e._id))}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,t.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun favori"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Commencez \xe0 ajouter des voitures \xe0 vos favoris."})]})]})}):(0,t.jsx)(i.Z,{children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8V7a4 4 0 00-8 0"})}),(0,t.jsx)("h2",{className:"mt-2 text-lg font-medium text-gray-900",children:"Connectez-vous pour voir vos favoris"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Vous devez \xeatre connect\xe9 pour acc\xe9der \xe0 vos favoris."})]})})})}}},function(e){e.O(0,[424,675,128,755,888,774,179],function(){return e(e.s=1903)}),_N_E=e.O()}]);