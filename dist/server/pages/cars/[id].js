"use strict";(()=>{var e={};e.id=37,e.ids=[37],e.modules={2679:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>m,getServerSideProps:()=>u,getStaticPaths:()=>h,getStaticProps:()=>x,reportWebVitals:()=>p,routeModule:()=>N,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>b,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>f});var r=s(7093),i=s(5244),l=s(1323),c=s(6105),n=s(6719),o=s(9917),d=e([o]);o=(d.then?(await d)():d)[0];let m=(0,l.l)(o,"default"),x=(0,l.l)(o,"getStaticProps"),h=(0,l.l)(o,"getStaticPaths"),u=(0,l.l)(o,"getServerSideProps"),g=(0,l.l)(o,"config"),p=(0,l.l)(o,"reportWebVitals"),f=(0,l.l)(o,"unstable_getStaticProps"),j=(0,l.l)(o,"unstable_getStaticPaths"),v=(0,l.l)(o,"unstable_getStaticParams"),y=(0,l.l)(o,"unstable_getServerProps"),b=(0,l.l)(o,"unstable_getServerSideProps"),N=new r.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/cars/[id]",pathname:"/cars/[id]",bundlePath:"",filename:""},components:{App:n.default,Document:c.default},userland:o});a()}catch(e){a(e)}})},9917:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>u,getStaticPaths:()=>g,getStaticProps:()=>p});var r=s(997),i=s(6689),l=s(5675),c=s.n(l),n=s(6426),o=s(6706),d=s(9648),m=s(6201),x=s(1163),h=e([n,d,m]);function u({car:e,isFavorite:t}){var s,a;let{user:l}=(0,o.a)(),[h,u]=(0,i.useState)(t),[g,p]=(0,i.useState)(!1),[f,j]=(0,i.useState)(0);if((0,x.useRouter)().isFallback)return r.jsx("div",{children:"Loading..."});let v=async()=>{if(!l){m.default.error("Vous devez \xeatre connect\xe9 pour ajouter des favoris");return}try{p(!0),h?(await d.default.delete("/api/favorites",{data:{carId:e.id}}),m.default.success("Retir\xe9 des favoris")):(await d.default.post("/api/favorites",{carId:e.id}),m.default.success("Ajout\xe9 aux favoris")),u(!h)}catch(e){m.default.error("Une erreur est survenue")}finally{p(!1)}};return r.jsx(n.Z,{children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative h-96",children:[e.images.length>0?(0,r.jsxs)(r.Fragment,{children:[r.jsx(c(),{src:e.images[f],alt:`${e.title} - Image ${f+1}`,fill:!0,className:"object-cover"}),e.images.length>1&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{onClick:()=>{j(t=>0===t?e.images.length-1:t-1)},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("button",{onClick:()=>{j(t=>t===e.images.length-1?0:t+1)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}):r.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:r.jsx("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("button",{onClick:v,disabled:g,className:"absolute top-4 right-4 p-2 rounded-full bg-white shadow-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:r.jsx("svg",{className:`w-6 h-6 ${h?"text-red-500":"text-gray-400"}`,fill:h?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:e.title}),r.jsx("p",{className:"text-3xl font-bold text-blue-600",children:(s=e.price,new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(s))})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Publi\xe9 le ",(a=e.createdAt,new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric"}).format(new Date(a)))]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["R\xe9f\xe9rence: ",e.id]})]})]}),(0,r.jsxs)("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Ann\xe9e"}),r.jsx("p",{className:"mt-1 text-lg text-gray-900",children:e.year})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Kilom\xe9trage"}),(0,r.jsxs)("p",{className:"mt-1 text-lg text-gray-900",children:[e.mileage.toLocaleString("fr-FR")," km"]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Carburant"}),r.jsx("p",{className:"mt-1 text-lg text-gray-900",children:e.fuel.charAt(0).toUpperCase()+e.fuel.slice(1)})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Transmission"}),r.jsx("p",{className:"mt-1 text-lg text-gray-900",children:e.transmission.charAt(0).toUpperCase()+e.transmission.slice(1)})]})]}),e.technicalDetails&&(0,r.jsxs)("div",{className:"mt-8",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"D\xe9tails techniques"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.technicalDetails.power&&(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Puissance"}),(0,r.jsxs)("p",{className:"mt-1 text-gray-900",children:[e.technicalDetails.power," ch"]})]}),e.technicalDetails.engineSize&&(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Cylindr\xe9e"}),(0,r.jsxs)("p",{className:"mt-1 text-gray-900",children:[e.technicalDetails.engineSize," cm\xb3"]})]}),e.technicalDetails.doors&&(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Portes"}),r.jsx("p",{className:"mt-1 text-gray-900",children:e.technicalDetails.doors})]}),e.technicalDetails.color&&(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Couleur"}),r.jsx("p",{className:"mt-1 text-gray-900",children:e.technicalDetails.color})]})]})]}),(0,r.jsxs)("div",{className:"mt-8",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Description"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:e.description})]}),e.features.length>0&&(0,r.jsxs)("div",{className:"mt-8",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\xc9quipements"}),r.jsx("ul",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-2",children:e.features.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center text-gray-700",children:[r.jsx("svg",{className:"w-4 h-4 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e]},t))})]}),(0,r.jsxs)("div",{className:"mt-8 border-t border-gray-200 pt-8",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations vendeur"}),r.jsx("div",{className:"flex items-start space-x-6",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-medium",children:"Type : "}),e.seller.type.charAt(0).toUpperCase()+e.seller.type.slice(1)]}),e.seller.name&&(0,r.jsxs)("p",{className:"text-gray-700 mt-2",children:[r.jsx("span",{className:"font-medium",children:"Nom : "}),e.seller.name]})]})})]})]})]})})})}[n,d,m]=h.then?(await h)():h;let g=async()=>{try{let e=await fetch("http://localhost:3000/api/api/cars?limit=100");if(!e.ok)throw Error(`Failed to fetch cars: ${e.statusText}`);return{paths:(await e.json()).cars.map(e=>({params:{id:e.id?e.id.toString():""}})),fallback:"blocking"}}catch(e){return{paths:[],fallback:"blocking"}}},p=async({params:e})=>{try{let t=e?.id,s=await fetch(`http://localhost:3000/api/api/cars/${t}`);if(!s.ok)throw Error(`Failed to fetch car: ${s.statusText}`);let a=await s.json();if(!a.car)return{notFound:!0};return{props:{car:a.car,isFavorite:!1},revalidate:3600}}catch(e){return{notFound:!0}}};a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},6201:e=>{e.exports=import("react-hot-toast")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[859,910,675,19],()=>s(2679));module.exports=a})();