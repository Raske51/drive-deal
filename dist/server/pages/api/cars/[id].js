"use strict";(()=>{var e={};e.id=961,e.ids=[961],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},5022:(e,t,r)=>{r.r(t),r.d(t,{config:()=>c,default:()=>l,routeModule:()=>E});var s={};r.r(s),r.d(s,{default:()=>d});var n=r(1802),a=r(7153),u=r(6249),o=r(3030);async function i(e,t){let{id:r}=e.query;if(!r||"string"!=typeof r)return t.status(400).json({message:"Invalid car ID"});switch(e.method){case"GET":try{let e=await (0,o.J)("SELECT * FROM cars WHERE id = ?",[r]),s=e.results?.[0];if(!s)return t.status(404).json({message:"Car not found"});return t.status(200).json(s)}catch(e){return t.status(500).json({message:"Internal server error"})}break;case"PUT":try{let s=e.body,n=new Date().toISOString();delete s.id;let a=[],u=[];for(let[e,t]of Object.entries(s))a.push(`${e} = ?`),u.push(t);a.push("updated_at = ?"),u.push(n),u.push(r);let i=await (0,o.J)(`UPDATE cars SET ${a.join(", ")} WHERE id = ?`,u);if(0===i.changes)return t.status(404).json({message:"Car not found"});let d=await (0,o.J)("SELECT * FROM cars WHERE id = ?",[r]);return t.status(200).json({message:"Car updated successfully",car:d.results?.[0]})}catch(e){return t.status(500).json({message:"Internal server error"})}break;case"DELETE":try{let e=await (0,o.J)("DELETE FROM cars WHERE id = ?",[r]);if(0===e.changes)return t.status(404).json({message:"Car not found"});return t.status(200).json({message:"Car deleted successfully"})}catch(e){return t.status(500).json({message:"Internal server error"})}break;default:t.setHeader("Allow",["GET","PUT","DELETE"]),t.status(405).end(`Method ${e.method} Not Allowed`)}}let d=(0,r(1892).mk)(i),l=(0,u.l)(s,"default"),c=(0,u.l)(s,"config"),E=new n.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/cars/[id]",pathname:"/api/cars/[id]",bundlePath:"",filename:""},userland:s})},1892:(e,t,r)=>{r.d(t,{V3:()=>o,mk:()=>i});let s=require("jsonwebtoken");var n=r.n(s);let a=process.env.JWT_SECRET||"temporary-dev-secret-do-not-use-in-production",u=e=>{try{return n().verify(e,a)}catch(e){return null}},o=e=>n().sign({sub:e},a,{expiresIn:"24h"}),i=e=>async(t,r)=>{try{let s=t.headers.authorization?.split(" ")[1];if(!s)throw Error("No token provided");let n=u(s);if(!n)throw Error("Invalid token");return t.user={id:n.sub,email:n.email},e(t,r)}catch(e){return r.status(401).json({error:e.message})}}},3030:(e,t,r)=>{r.d(t,{J:()=>s});async function s(e,t=[]){return{changes:1,results:[]}}},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=5022);module.exports=r})();